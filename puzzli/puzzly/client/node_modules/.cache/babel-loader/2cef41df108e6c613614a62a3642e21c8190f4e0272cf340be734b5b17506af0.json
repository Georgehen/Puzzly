{"ast":null,"code":"var _jsxFileName = \"/home/tor/puzzli/puzzly/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Chess } from 'chess.js';\nimport Navbar from './components/NavBar';\nimport UserInput from './components/UserInput';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [username, setUsername] = useState('Mahlloch');\n  const [blunderPositions, setBlunderPositions] = useState([]); // To store FENs\n\n  const generate = async () => {\n    try {\n      const response = await axios.get(`https://lichess.org/api/games/user/${username}?max=50&analysed=true&evals=true&moves=true&pgnInJson=true&perfType=blitz,rapid,classical`, {\n        headers: {\n          'Accept': 'application/x-ndjson'\n        }\n      });\n      const games = response.data.split('\\n').filter(x => x).map(x => JSON.parse(x));\n      const blunders = findBlunders(games, username);\n      console.log(blunders);\n      setBlunderPositions(blunders);\n    } catch (error) {\n      console.error('Error fetching games:', error);\n    }\n  };\n  function findBlunders(games, username) {\n    let blunderFENs = [];\n    games.forEach(game => {\n      console.log(\"game: \", game);\n      console.log(game.pgn);\n\n      // Determine which color the user is playing\n      const moves = game.moves;\n      const players = game.players;\n      const userColor = players.white.user.name === username ? 'white' : 'black';\n      const analysis = game.analysis;\n      const moveList = moves.split(' ');\n      console.log(moveList);\n      const chess = new Chess();\n      let idx = 0;\n\n      // Process each move\n      moveList.forEach(move => {\n        // Check if the current move is a blunder by the user\n        if (analysis[idx] && analysis[idx].judgment && analysis[idx].judgment.name === 'Blunder') {\n          const currentPlayer = idx % 2 === 0 ? 'white' : 'black';\n\n          // Check if the blunder was made by the user\n          if (currentPlayer === userColor) {\n            // Undo the blunder move to get the position before the move\n            // Add the FEN of the position before the blunder\n            blunderFENs.push(chess.fen());\n          }\n        }\n        chess.move(move);\n        idx++;\n      });\n    });\n    console.log(blunderFENs);\n    return blunderFENs;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"app\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"hero is-fullheight\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero-head\",\n        children: /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(UserInput, {\n            username: username,\n            setUsername: setUsername,\n            generate: generate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"has-text-centered\",\n            children: \"Enter your Lichess username to generate your tactics based on blunders.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), blunderPositions.map((fen, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: `https://lichess.org/analysis/fromPosition/${encodeURIComponent(fen)}`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: [\"Analyze FEN before blunder \", index + 1]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 33\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"4xVBPB1nspCSOgY4D8gv68d/s8I=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","axios","Chess","Navbar","UserInput","jsxDEV","_jsxDEV","App","_s","username","setUsername","blunderPositions","setBlunderPositions","generate","response","get","headers","games","data","split","filter","x","map","JSON","parse","blunders","findBlunders","console","log","error","blunderFENs","forEach","game","pgn","moves","players","userColor","white","user","name","analysis","moveList","chess","idx","move","judgment","currentPlayer","push","fen","id","children","className","fileName","_jsxFileName","lineNumber","columnNumber","index","href","encodeURIComponent","target","rel","_c","$RefreshReg$"],"sources":["/home/tor/puzzli/puzzly/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Chess } from 'chess.js';\nimport Navbar from './components/NavBar';\nimport UserInput from './components/UserInput';\n\nfunction App() {\n    const [username, setUsername] = useState('Mahlloch');\n    const [blunderPositions, setBlunderPositions] = useState([]); // To store FENs\n\n    const generate = async () => {\n        try {\n            const response = await axios.get(`https://lichess.org/api/games/user/${username}?max=50&analysed=true&evals=true&moves=true&pgnInJson=true&perfType=blitz,rapid,classical`, {\n                headers: { 'Accept': 'application/x-ndjson' }\n            });\n            const games = response.data.split('\\n').filter(x => x).map(x => JSON.parse(x));\n            const blunders = findBlunders(games, username);\n            console.log(blunders);\n            setBlunderPositions(blunders);\n        } catch (error) {\n            console.error('Error fetching games:', error);\n        }\n    };\n\n    function findBlunders(games, username) {\n      let blunderFENs = [];\n\n      games.forEach((game) => {\n        console.log(\"game: \", game);\n        console.log(game.pgn);\n\n        // Determine which color the user is playing\n        const moves = game.moves;\n        const players = game.players;\n        const userColor = players.white.user.name === username ? 'white' : 'black';\n        const analysis = game.analysis;\n        const moveList = moves.split(' ');\n        console.log(moveList);\n        const chess = new Chess();\n\n        let idx = 0;\n\n\n        // Process each move\n        moveList.forEach((move) => {\n          // Check if the current move is a blunder by the user\n          if (analysis[idx] && analysis[idx].judgment && analysis[idx].judgment.name === 'Blunder') {\n            const currentPlayer = idx % 2 === 0 ? 'white' : 'black';\n\n            // Check if the blunder was made by the user\n            if (currentPlayer === userColor) {\n\n              // Undo the blunder move to get the position before the move\n              // Add the FEN of the position before the blunder\n              blunderFENs.push(chess.fen());\n            }\n          }\n          chess.move(move);\n          idx++;\n        });\n      });\n\n      console.log(blunderFENs);\n      return blunderFENs;\n    }\n\n\n\n    return (\n        <div id=\"app\">\n            <section className=\"hero is-fullheight\">\n                <div className=\"hero-head\">\n                    <Navbar />\n                </div>\n                <div className=\"hero-body\">\n                    <div className=\"container\">\n                        <UserInput\n                            username={username}\n                            setUsername={setUsername}\n                            generate={generate}\n                        />\n                        <div className=\"has-text-centered\">\n                            Enter your Lichess username to generate your tactics based on blunders.\n                        </div>\n                        <br />\n                        {blunderPositions.map((fen, index) => (\n                            <div key={index}>\n                                <a href={`https://lichess.org/analysis/fromPosition/${encodeURIComponent(fen)}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                                    Analyze FEN before blunder {index + 1}\n                                </a>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </section>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}